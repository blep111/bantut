<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Multi Facebook Auto Bot</title>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
body{font-family:Poppins;background:#0d1117;color:#fff;text-align:center;padding:20px;}
h1{color:#61dafb;}
textarea,input,button{width:90%;max-width:500px;margin:5px 0;padding:10px;border-radius:6px;border:none;}
textarea{height:100px;}
button{background:#0d6efd;color:#fff;border:none;padding:10px 20px;cursor:pointer;border-radius:6px;margin-top:5px;}
button:hover{background:#0b5ed7;}
pre{width:90%;max-width:500px;background:#161b22;padding:10px;margin:20px auto;text-align:left;border-radius:8px;color:#9eeaf9;}
</style>
</head>
<body>
<h1>ðŸ’¥ Multi Facebook Auto React | Comment | Share</h1>

<label>Facebook Tokens (one per line)</label><br>
<textarea id="tokens" placeholder="Paste one token per line"></textarea><br>

<label>Target ID (User/Page)</label><br>
<input id="targetId" placeholder="e.g. 1000123456789"><br>

<label>Reactions (comma separated: LIKE, LOVE, WOW)</label><br>
<input id="reactions" value="LIKE,LOVE,HAHA"><br>

<label>Comment Message</label><br>
<input id="comment" value="Awesome post! ðŸ”¥"><br>

<button id="startBtn">Start Bot</button>
<button id="stopBtn">Stop Bot</button>

<pre id="output"></pre>

<script>
const output = document.getElementById("output");

document.getElementById("startBtn").onclick = async () => {
  const tokensRaw = document.getElementById("tokens").value.trim();
  const targetId = document.getElementById("targetId").value.trim();
  const reactions = document.getElementById("reactions").value.trim().split(",").map(r=>r.trim());
  const comment = document.getElementById("comment").value.trim();

  if (!tokensRaw || !targetId) return Swal.fire("Error", "Please fill all fields!", "error");

  const tokens = tokensRaw.split("\n").map(t => t.trim()).filter(t => t.length > 0);

  output.textContent = "Starting multi-bot...";

  try {
    const res = await fetch("/api/start-bot", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ tokens, targetId, reactions, comment })
    });
    const data = await res.json();
    output.textContent = JSON.stringify(data, null, 2);
    Swal.fire("âœ… Activated", data.message, "success");
  } catch (err) {
    output.textContent = err.toString();
    Swal.fire("Error", err.toString(), "error");
  }
};

document.getElementById("stopBtn").onclick = async () => {
  const targetId = document.getElementById("targetId").value.trim();
  if (!targetId) return Swal.fire("Error", "Enter target ID to stop.", "error");

  try {
    const res = await fetch("/api/stop-bot", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ targetId })
    });
    const data = await res.json();
    output.textContent = JSON.stringify(data, null, 2);
    Swal.fire("ðŸ›‘ Stopped", data.message, "info");
  } catch (err) {
    output.textContent = err.toString();
    Swal.fire("Error", err.toString(), "error");
  }
};
</script>
</body>
</html>