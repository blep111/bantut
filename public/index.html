<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Facebook Auto React & Comment Bot</title>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
body{font-family:Arial;background:#1e1b2e;color:#fff;padding:20px;}
textarea,input,button{width:100%;margin:5px 0;padding:8px;border-radius:5px;border:none;}
button{background:#8b5cf6;color:#fff;cursor:pointer;}
button:hover{background:#7c3aed;}
pre{background:#1f1b34;padding:12px;border-radius:8px;color:#fff;overflow-x:auto;}
</style>
</head>
<body>

<h2>Facebook Auto React & Comment Bot</h2>

<label>Your Facebook Account Token:</label>
<textarea id="token" rows="3"></textarea>

<label>Target ID (User/Page you can access):</label>
<input id="targetId" placeholder="1234567890"/>

<label>Reactions (comma separated, e.g., LIKE, LOVE, WOW):</label>
<input id="reactions" placeholder="LIKE, LOVE, WOW"/>

<label>Polling Interval (ms, default 10000 = 10s):</label>
<input id="interval" placeholder="10000"/>

<button id="startBot">Activate Bot</button>

<pre id="result"></pre>

<script>
document.getElementById('startBot').addEventListener('click', async () => {
  const token = document.getElementById('token').value.trim();
  const targetId = document.getElementById('targetId').value.trim();
  const reactionsRaw = document.getElementById('reactions').value.trim();
  const interval = document.getElementById('interval').value.trim();

  if (!token || !targetId || !reactionsRaw) {
    Swal.fire('Missing Fields','Please fill all inputs','error');
    return;
  }

  const reactions = reactionsRaw.split(',').map(r => r.trim().toUpperCase()).filter(r => r);

  document.getElementById('result').textContent = 'Bot activated...';

  try {
    const resp = await fetch('/api/start-watch', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({token, targetId, reactions, interval})
    });
    const data = await resp.json();
    document.getElementById('result').textContent = JSON.stringify(data,null,2);
    Swal.fire('Bot Activated',`It will react and comment "hi master" on target ID ${targetId}`,'success');
  } catch(err){
    document.getElementById('result').textContent = err.toString();
    Swal.fire('Error','Network or server error','error');
  }
});
</script>

</body>
</html>